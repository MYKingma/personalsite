<!-- changenew.html for implementing a city guide webapp

Maurice Kingma
Minor Programmeren - Web App Studio

Layout page for changing locations
-->

{% extends "base.html" %}

<!-- page title -->
{% block title %}Stadsgids - Dashboard{% endblock %}

<!-- page content -->
{% block content %}
<div class="container">
	<h1>Locatie wijzigen</h1>
	<a href="{{ url_for('location', name=name, place_id=recommendation.place_id)}}" target="_blank"><h2>{{ name }}</h2></a>
	<form class="needs-validation" action="{{ url_for('controlnew') }}" method="post" novalidate>
		<div class="form-group">
			<label for="review">Beoordeling</label>
			<textarea id="review" type="text" class="form-control" name="review" required>{{ recommendation.review }}</textarea>
			<div class="invalid-feedback">Geef een tekstbeoordeling</div>
		</div>
		<div class="form-group">
			<label for="tip">Tip</label>
			<textarea id="tip" type="text" class="form-control" name="tip" required>{{ recommendation.tip }}</textarea>
			<div class="invalid-feedback">Geef een tip</div>
		</div>
		<div class="form-group">
			{% if not price_level %}
			<label for="price_level">Prijsklasse (Stadsgids: {{ recommendation.price_level|int * "€" }})</label>
			{% else %}
			<label for="price_level">Prijsklasse (Stadsgids: {{ recommendation.price_level|int * "€" if recommendation.price_level|int > 0 else "Onbekend" }}, Google: {{ price_level if not price_level == "False" else "Onbekend" }})</label>
			{% endif %}
			<select id="price_level" name="price_level" class="custom-select">
				<option value="0" selected>Onbekend</option>
				<option value="1">€</option>
				<option value="2">€€</option>
				<option value="3">€€€</option>
				<option value="4">€€€€</option>
			</select>
		</div>
		<ul class="nav nav-tabs" id="myTab" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="opening-tab" data-toggle="tab" href="#opening" role="tab" aria-controls="opening" aria-selected="true">Openingstijden</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="events-tab" data-toggle="tab" href="#events" role="tab" aria-controls="events" aria-selected="false">Evenementen</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="types-tab" data-toggle="tab" href="#types" role="tab" aria-controls="events" aria-selected="false">Categorieën</a>
			</li>
		</ul>
		<div class="tab-content" id="myTabContent">
			{% if opening %}
			<div class="tab-pane fade show active" id="opening" role="tabpanel" aria-labelledby="opening-tab">
				<p>Openingstijden al gespecificeerd door Google API</p>
			</div>
			{% else %}
			<div class="tab-pane fade show active" id="opening" role="tabpanel" aria-labelledby="opening-tab">
				<p>24 bij maandag voor "24 uur per dag geopend", laat leeg als onbekend.</p>
	  			<div class="form-row">
	  				<div class="col">
	  					<div class="form-group">
	  						<label for="openmonday">Openingstijden maandag</label>
	  						<input class="form-control" value="{{ recommendation.opening }}" value="{{ recommendation.opening[0] if weektext }}" type="text" name="monday" id="openmonday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  				<div class="col">
	  					<div class="form-group">
	  						<label for="opentuesday">Openingstijden dinsdag</label>
	  						<input value="{{ recommendation.opening[1] if weektext }}" class="form-control" type="text" name="tuesday" id="opentuesday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  			</div>
	  			<div class="form-row">
	  				<div class="col">
	  					<div class="form-group">
	  						<label for="openwednesday">Openingstijden woensdag</label>
	  						<input value="{{ recommendation.opening[2] if weektext }}" class="form-control" type="text" name="wednesday" id="openwednesday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  				<div class="col">
	  					<div class="form-group">
	  						<label for="openthursday">Openingstijden donderdag</label>
	  						<input value="{{ recommendation.opening[3] if weektext }}" class="form-control" type="text" name="thursday" id="openthursday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  			</div>
	  			<div class="form-row">
	  				<div class="col">
	  					<div class="form-group">
	  						<label for="openfriday">Openingstijden vrijdag</label>
	  						<input value="{{ recommendation.opening[4] if weektext }}" class="form-control" type="text" name="friday" id="openfriday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  				<div class="col">
	  					<div class="form-group">
	  						<label for="opensaturday">Openingstijden zaterdag</label>
	  						<input value="{{ recommendation.opening[5] if weektext }}" class="form-control" type="text" name="saturday" id="opensaturday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  			</div>
	  			<div class="form-row">
	  				<div class="col-6">
	  					<div class="form-group">
	  						<label for="opensunday">Openingstijden zondag</label>
	  						<input value="{{ recommendation.opening[6] if weektext }}" class="form-control" type="text" name="sunday" id="opensunday" placeholder="00:00–00:00">
	  					</div>
	  				</div>
	  			</div>
			</div>
			{% endif %}
			<div class="tab-pane fade" id="events" role="tabpanel" aria-labelledby="events-tab">
				<div id="events" class="scrollbox">
					{% if events %}
					{% for event in events %}
					<div class="card">
						<div class="card-body">
							<h5 class="card-title">{{ event.title }}</h5>
							<h6 class="card-subtitle mb-2 text-muted"><i class="far fa-calendar-alt"></i> {{ event.date.strftime("%-d %B %Y") }} - <i class="far fa-clock"></i> {{ event.date.strftime("%H:%M") }}</h6>
							<p class="card-text">{{ event.description }}</p>
							<a href="{{url_for('delete_event', name=name, event_id=event.id)}}">verwijder</a>
						</div>
					</div>
					{% endfor %}
					{% else %}
					<p>Maak evenementen aan via de locatiepagina, hierna kunnen ze hier worden verwijderd.</p>
					{% endif %}
				</div>
			</div>
			<div class="tab-pane fade" id="types" role="tabpanel" aria-labelledby="types-tab">
				<div id="types">
					{% if recommendation.type %}
					{% set typelist = recommendation.type.replace('{', '').replace('}', '').split(',') %}
					<p>Geselecteerde categorieën</p>
					<div class="form-row">
						{% for type in typelist %}
						<div class="form-group col-6">
							<div id="visible" class="form-check">
								<input class="form-check-input" type="checkbox" value="{{ type }}" name="type" checked>
								<label class="form-check-label">{{ type }}</label>
							</div>
						</div>
						{% endfor %}
					</div>
					{% endif %}
					<p>Andere categorieën</p>
					<div class="form-row">
						{% for type in API_TYPES %}
						{% set nltype = TYPES_DICT[type] %}
						{% if nltype not in types or nltype not in typelist %}
						<div class="form-group">
							<div id="visible" class="form-check">
								<input class="form-check-input" type="checkbox" value="{{ nltype }}" name="type">
								<label class="form-check-label">{{ nltype }}</label>
							</div>
						</div>
						{% endif %}
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
		<div id="visible" class="form-check">
			<input class="form-check-input" type="checkbox" value="True" name="visible">
			<label class="form-check-label">Zichtbaar</label>
		</div>
		<input type="hidden" name="place_id" value="{{ recommendation.place_id }}">
		<input type="hidden" name="name" value="{{ recommendation.name }}">
		<input type="hidden" name="action" value="change">
		<input id="visible" type="submit" class="btn btn-outline-secondary">
	</form>
</div>
{% endblock %}
